<?php namespace App\Models\Report; 
/*********************************************************************
 *  Created By       :  Generator Version 1.0.23                     *
 *  Created Date     :  Aug 18, 2020                                 *
 *  Description      : All code generated by model generator         *
 *  Generator Author : Tommy Maurice(tommy_maurice@yahoo.com)        *
 *********************************************************************/
use CodeIgniter\Model;

class M_mtb_thr extends Model
{
     /* START PRIVATE VARIABLES */
     protected $DBGroup = 'hris';
     protected $table = 'tr_slip';
     protected $primaryKey = 'slip_id';
     protected $returnType = 'array';
     protected $db = null;

     public function getDataByYears($startYears, $endYears, $dept)
     {
          // $startYears = ($yearPeriod-1).'-05-03';
          // $endYears = $yearPeriod.'-04-21';
          $stQuery  = "SELECT a.*,b.*,c.* FROM tr_slip a, mt_salary b, mt_bank c WHERE a.biodata_id = b.biodata_id AND a.bank_id = c.bank_id AND a.date_process BETWEEN '".$startYears."' AND '".$endYears."' AND a.dept = '".$dept."' group BY a.biodata_id"; 
          // echo $stQuery;
          // exit();
          $query   = $this->db->query($stQuery);
          return $query->getResultArray();
     }

     public function getDataByBiodataId($startYears, $endYears,$biodataId)
     {
          // $startYears = ($yearPeriod-1).'-05-03';
          // $endYears = $yearPeriod.'-04-21';
          $stQuery  = "SELECT a.*,b.*,c.* FROM tr_slip a, mt_salary b, mt_bank c WHERE a.biodata_id = b.biodata_id AND a.bank_id = c.bank_id AND a.date_process BETWEEN '".$startYears."' AND '".$endYears."' AND a.biodata_id = '".$biodataId."'"; 
          // echo $stQuery;
          // exit();
          $query   = $this->db->query($stQuery);
          return $query->getResultArray();
     }

     public function getDataDept($startYears, $endYears)
     {
          // $startYears = ($yearPeriod-1).'-05-03';
          // $endYears = $yearPeriod.'-04-21';
          $stQuery  = "SELECT a.dept FROM tr_slip a, mt_salary b, mt_bank c WHERE a.biodata_id = b.biodata_id AND a.bank_id = c.bank_id AND a.date_process BETWEEN '".$startYears."' AND '".$endYears."' group BY a.dept"; 
          // echo $stQuery;
          // exit();
          $query   = $this->db->query($stQuery);
          return $query->getResultArray();
     }

}